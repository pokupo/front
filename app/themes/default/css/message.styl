/* Хэлперы и переменные */
@import '../../../styles/helpers/*'

.b-mail__selectall
	display inline-block
	margin-left 50px
	position relative
	top -5px

/* Кнопка сверху и снизу */
.btn.b-mail__addbtn
	margin -17px 0 0
	float right

	&--top
		margin-top 30px


.with-num
	display inline-block
	position relative

	.menu__item__num
		right -30px
		top -10px


/* Сообщения и переписка */
.b-mail
.b-chat
	font-size 13px
	padding-bottom 40px

	&__item
		border-bottom 1px solid $grey
		z-index 0
		/* min-height 180px */

		&:first-child
			border-top 1px solid $grey

		&:hover
			background rgba($white,0.4)

.b-mail__actions
	padding 20px 0

.b-mail .b-order-list__actions
	padding-left 19px


.b-mail__item.b-dialog.unread
	background #f0dbdb

/* Одно сообщение */
.b-dialog
	position relative
	cursor default
	transition background 0.1s ease-in-out

	&__body
		margin 0 60px
		padding 24px 0 24px 125px
		position relative

	&__checkbox
	&__drop
		float left

	&__checkbox
		margin -10px 0 0 20px
		position absolute
		top 50%

	&__drop
		margin 0 0 0 -60px
		position absolute
		left 100%
		top 50%
		margin-top -20px

	&__status
		position relative
		float right
		&:before
			pseudo()
			width 21px
			height 21px
			border-radius 21px
			border 2px solid $green
			top 50%
			margin-top -10px
			left -25px

	&__userpic
		margin -50px 0 0 0
		position absolute
		left 0px
		top 50%

		.b-profile-info__photo
			position relative
			width 100px
			height 100px
			line-height 100px
			border 4px solid $orange
			
			&.with-icon:after
				content ''
				display block
				position absolute
				top 50%
				left 50%
				margin -17px 0 0 -13px
				z-index -1
				sprite($icon__profile--big)

	&__author
		font-weight 700
		font-size 14px
		line-height 20px
		margin-bottom 10px

	&__date
		font-size 12px
		line-height 20px
		display inline-block
		margin-left 8px
		padding-left 8px
		border-left 1px solid #ccc
			
	&__title
		font-size 16px
		font-weight 400
		margin-bottom 5px

		a 
			text-decoration none
			border-bottom 1px solid rgba($a__link, 0.25)

		.b-dialog__title-num
			font-size 14px
			padding-left 6px
			font-weight normal
			color #999

	&.unread
		.b-dialog__title
			font-weight 800

	.b-dialog__preview
		p 
			position relative
			max-width 540px

/* Модификация для переписки */
.b-chat 
	.b-dialog
		&__body
			padding 24px 0 24px 120px
			margin 0 20px

		&__userpic
			margin-top 0
			top 30px

		&.incoming
			.b-dialog__userpic .b-profile-info__photo
				border-color $green

			.b-dialog__status:before
				border-color $red

			&.unread
				background #f0dbdb
				.b-dialog__status:before
					background $red
		&.outgoing
			.b-dialog__status
				.pseudo-link
					border-bottom 0
					color #666
					cursor default

				&:before
					border-color $green

			&.unread
				.b-dialog__status:before
					background $green


/* Свёрнутое сообщение */
.b-dialog.closed
	min-height 0!important
	background $grey
	margin-bottom 2px

	.b-dialog
		&__body
			margin 0 20px
			padding 30px 0 30px 70px
			height 80px

		&__status
			float left
			margin -25px -100% 0 0
			position relative
			left -65px

			.pseudo-link
				visibility hidden

			&:before
				width 15px
				height 15px
				border-width 1px
				top 50%
				margin-top -7px
				left -19px

		&__userpic
			margin-top -30px
			top 50%

			.b-profile-info__photo
				width 60px
				height 60px
				&:after
					margin -10px 0 0 -8px
					sprite($icon__profile)

		&__author
			float left
			margin-right 10px

		&__date
			color #999
			font-weight normal
			font-size 12px

		&__preview
		&__text
			p
				white-space nowrap
				overflow hidden
				text-overflow ellipsis
				max-width 600px
				display none
				br
					display none
			p:first-child
				display block

.close-all
	position relative

	&:after
		pseudo()
		top 5px
		left -15px
		sprite($accordeon__group)
		transition transform 0.15s ease-in-out

	&.active
		&:after
			transform rotate(180deg)


.b-chat-actions
	text-align right

	&__item
		display inline-block
		vertical-align middle
		margin-right 20px

.profile .pagination
	.radio-circles .menu__item:first-child
		margin-left 0






@media only screen and (max-width: 640px)
	.btn.b-mail__addbtn
		float none
		margin -17px auto 30px

	.profile-mail
		&__actions
			text-align center

	.b-dialog__body
		padding-left 75px
		margin 0 35px

	.b-dialog__drop
		margin-left -40px

	.b-dialog__checkbox
		margin-left 0

	.b-dialog__userpic 
		margin-top -30px

		.b-profile-info__photo
			width 60px
			height 60px
			border-width 2px

	.pagination
		text-align center

	/* Вкладки */
	.b-order-table 
		tbody 
			tr 
				td
					&:first-child
						padding-left 5px
					&:last-child
						padding-right 0

	.b-order-table__phone
		width 100px

	.b-order-table__name
		width 150px

	.profile 
		.b-order-table__action
			width 52px

		.b-order-table__drop
			width 40px

	.b-chat .b-dialog__body
		padding-left 80px
	
